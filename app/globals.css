  @tailwind base;
@tailwind components;
@tailwind utilities;

/* 移除.background-texture动画背景相关代码，仅保留body格纹静态背景 */

/* 自定义鼠标指针 */
.custom-cursor {
  position: fixed;
  width: 16px;
  height: 16px;
  background-color: rgb(255, 255, 255);
  border-radius: 50%;
  pointer-events: none;
  z-index: 20000;
  transition: transform 0.1s ease-out, background-color 0.1s ease-out, opacity 0.1s ease-out;
  transform: translate(-50%, -50%);
  mix-blend-mode: difference;
  will-change: transform;
  opacity: 1; /* 初始显示 */
  left: 50%; /* 默认居中位置 */
  top: 50%;
}

.custom-cursor.hovering {
  transform: translate(-50%, -50%) scale(1.5);
  background-color: white;
}

.custom-cursor.arrow-hover {
  transform: translate(-50%, -50%) scale(1.8);
  background-color: white;
  box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
}

/* 隐藏默认鼠标指针 */
* {
  cursor: none !important;
}




/* 箭头文字悬停效果 */
.arrow-text {
  transition: color 0.2s ease;
}

.arrow-text:hover {
  color: #ffffff !important;
  text-shadow: 0 0 8px rgba(255, 255, 255, 0.3);
}

/* 箭头文字悬停时的光标效果 */
.custom-cursor.arrow-hover {
  transform: translate(-50%, -50%) scale(1.8);
  background-color: white;
  box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
}

/* 阿里巴巴普惠体3.0 */
@font-face {
  font-family: 'Alibaba PuHuiTi 3.0';
  src: url('https://at.alicdn.com/t/webfont_qx9s73uwqtp.eot');
  src: url('https://at.alicdn.com/t/webfont_qx9s73uwqtp.eot?#iefix') format('embedded-opentype'),
       url('https://at.alicdn.com/t/webfont_qx9s73uwqtp.woff2') format('woff2'),
       url('https://at.alicdn.com/t/webfont_qx9s73uwqtp.woff') format('woff'),
       url('https://at.alicdn.com/t/webfont_qx9s73uwqtp.ttf') format('truetype'),
       url('https://at.alicdn.com/t/webfont_qx9s73uwqtp.svg#AlibabaPuHuiTi') format('svg');
  font-weight: normal;
  font-style: normal;
  font-display: swap;
}

* {
  box-sizing: border-box;
  padding: 0;
  margin: 0;
}

body {
  font-family: 'Alibaba PuHuiTi 3.0', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background-color: #000000; /* 用作整体基色，保证格纹背景生效 */
  color: #FCDEC0;
  /* 隐藏滚动条 */
  overflow-x: hidden;
  --color: rgb(255, 255, 255, 0.05); /* 降低格子透明度原为0.3 */
  background-image: linear-gradient(0deg, transparent 24%, var(--color) 25%, var(--color) 26%, transparent 27%, transparent 74%, var(--color) 75%, var(--color) 76%, transparent 77%, transparent),
    linear-gradient(90deg, transparent 24%, var(--color) 25%, var(--color) 26%, transparent 27%,transparent 74%, var(--color) 75%, var(--color) 76%, transparent 77%,transparent);
  background-size: 55px 55px;
}

html, body {
  min-height: 100vh;
  height: 100%;
}

/* 隐藏滚动条但保持滚动功能 */
html {
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* IE and Edge */
}

html::-webkit-scrollbar {
  display: none; /* Chrome, Safari and Opera */
}

/* 为所有元素隐藏滚动条 */
* {
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* IE and Edge */
}

*::-webkit-scrollbar {
  display: none; /* Chrome, Safari and Opera */
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
  
  /* CSS Columns masonry support */
  .break-inside-avoid {
    break-inside: avoid;
    page-break-inside: avoid;
    -webkit-column-break-inside: avoid;
  }
}

/* 在手机端隐藏自定义光标 */
@media (max-width: 768px) {
  .custom-cursor {
    display: none !important;
  }
  
  /* 恢复默认光标 */
  * {
    cursor: auto !important;
  }
}

/* 重叠文本效果 */
[data-overlap-text] {
  text-transform: uppercase;
  letter-spacing: -0.25ch;
  text-shadow: 1px 1px 0.25ch black;
  display: flex;
  font-family: 'Alibaba PuHuiTi 3.0', sans-serif;
  font-weight: 900;
}

[data-overlap-text] > span {
  position: relative;
  min-width: 0.25ch;
}

[data-overlap-text="front"] > span {
  z-index: calc(1 * var(--i, 1));
}

[data-overlap-text="back"] > span {
  z-index: calc(-1 * var(--i, 1));
}

[data-overlap-text="alter"] > span:nth-child(even) {
  z-index: calc(-1 * var(--i, 1));
}

.container {
  width: 100%;
  height: 100%;
  --color: rgba(114, 114, 114, 0.3);
  background-color: #191a1a;
  background-image: linear-gradient(0deg, transparent 24%, var(--color) 25%, var(--color) 26%, transparent 27%,transparent 74%, var(--color) 75%, var(--color) 76%, transparent 77%,transparent),
    linear-gradient(90deg, transparent 24%, var(--color) 25%, var(--color) 26%, transparent 27%,transparent 74%, var(--color) 75%, var(--color) 76%, transparent 77%,transparent);
  background-size: 55px 55px;
}

/* Gallery一比一还原样式区域 */
.gallery-area :root {
  --spacing-base: 1rem;
  --spacing-md: 1.5rem;
  --spacing-lg: 2rem;
  --color-text: #fff;
  --color-text-dim: 0.6;
  --transition-medium: 0.3s ease;
  --font-size-base: 14px;
}
.gallery-area *, .gallery-area *:before, .gallery-area *:after { box-sizing: border-box; user-select: none; }
.gallery-area body, .gallery-area {
  font-family: "Inter", sans-serif;
  background: #000;
}
.gallery-area .header, .gallery-area .footer {
  position: fixed;
  left: 0; width: 100vw; padding: 1.5rem; z-index: 10000;
  display: grid; grid-template-columns: repeat(12, 1fr); column-gap: var(--spacing-base);
  pointer-events: none; opacity: 1;
}
.gallery-area .header > *, .gallery-area .footer > * { pointer-events: auto; }
.gallery-area .header { top: 0; }
.gallery-area .footer { bottom: 0; }
.gallery-area .nav-section { grid-column: 1 / span 3; }
.gallery-area .values-section { grid-column: 5 / span 2; }
.gallery-area .location-section { grid-column: 7 / span 2; }
.gallery-area .contact-section { grid-column: 9 / span 2; }
.gallery-area .social-section { grid-column: 11 / span 2; text-align: right; }
.gallery-area .info-section { grid-column: 9 / span 4; text-align: right; }
.gallery-area .logo-container { margin-bottom: var(--spacing-md); display: block; width: 3rem; height: 1.5rem; position: relative; cursor: pointer; }
.gallery-area .logo-circles { position: relative; width: 100%; height: 100%; }
.gallery-area .circle { position: absolute; border-radius: 50%; transition: transform var(--transition-medium); width: 1.4rem; height: 1.4rem; background-color: var(--color-text); top: 50%; }
.gallery-area .circle-1 { left: 0; transform: translate(0, -50%); }
.gallery-area .circle-2 { left: 0.8rem; transform: translate(0, -50%); mix-blend-mode: exclusion; }
.gallery-area .logo-container:hover .circle-1 { transform: translate(-0.5rem, -50%); }
.gallery-area .logo-container:hover .circle-2 { transform: translate(0.5rem, -50%); }
.gallery-area a { position: relative; cursor: pointer; color: var(--color-text); padding: 0; display: inline-block; z-index: 1; text-decoration: none; font-size: var(--font-size-base); opacity: 1; transition: color var(--transition-medium); font-weight: 700; }
.gallery-area a::after { content: ""; position: absolute; top: 0; left: 0; width: 0; height: 100%; background-color: var(--color-text); z-index: -1; transition: width 0.3s cubic-bezier(0.34, 1.56, 0.64, 1); }
.gallery-area a:hover::after { width: 100%; }
.gallery-area a:hover { color: black; mix-blend-mode: difference; opacity: 1; }
.gallery-area p { display: block; text-decoration: none; color: #fff; font-size: 14px; font-weight: 600; letter-spacing: -0.01rem; -webkit-font-smoothing: antialiased; }
.gallery-area h3 { font-size: 14px; margin-bottom: var(--spacing-base); font-weight: 600; color: #fff; }
.gallery-area .viewport { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; overflow: hidden; z-index: 1; opacity: 1; }
/* ...省略...主要样式区会全部插入，长内容分多步逐步落地... */
/* Gallery样式迁移 end */

/* 补充 Gallery 运行所需样式（作用于 .gallery-area 作用域内） */
.gallery-area .canvas-wrapper { position: absolute; top: 0; left: 0; transform-origin: 0 0; will-change: transform; isolation: isolate; }
.gallery-area .grid-container { position: relative; width: 100%; height: 100%; }
.gallery-area .grid-item { position: absolute; width: var(--grid-item-size, 320px); height: var(--grid-item-size, 320px); background: transparent; cursor: pointer; will-change: transform, opacity; z-index: 1; opacity: 1; transition: opacity 0.6s ease; contain: layout paint size; }
.gallery-area .grid-item.out-of-view { opacity: 0.1; }
.gallery-area .grid-item.selected { z-index: 2 !important; }
.gallery-area .grid-item img { width: 100%; height: 100%; object-fit: cover; display: block; user-select: none; pointer-events: none; }

/* 可见性渐变覆盖层（参考原版 IntersectionObserver 实现） */
.gallery-area .visibility-overlay { 
  position: absolute; 
  inset: 0; 
  pointer-events: none; 
  opacity: 0; 
  background: rgba(0,0,0,0);
  will-change: opacity;
}

.gallery-area .split-screen-container { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; display: flex; z-index: 11000; opacity: 0; pointer-events: none; background: rgba(0, 0, 0, 0.8); }
.gallery-area .split-screen-container.active { opacity: 1; pointer-events: all; }
.gallery-area .split-left, .gallery-area .split-right { position: relative; width: 50vw; height: 100vh; background: transparent; display: flex; justify-content: center; align-items: center; z-index: 1; cursor: pointer; }
.gallery-area .zoom-target { width: 100%; height: 100%; position: relative; display: flex; align-items: center; justify-content: center; z-index: 1; }
.gallery-area .image-title-overlay { position: absolute; bottom: 40px; left: 40px; transform: none; color: white; z-index: 11002; opacity: 0; pointer-events: none; }
.gallery-area .image-slide-number { position: relative; width: 400px; height: 20px; margin-bottom: 0.5em; clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%); overflow: hidden; }
.gallery-area .image-slide-title { position: relative; width: 400px; height: 60px; margin-bottom: 1em; clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%); overflow: hidden; }
.gallery-area .image-slide-title h1 { position: absolute; top: 0; left: 0; color: white; font-size: 48px; font-weight: 600; letter-spacing: -0.02em; line-height: 1.2; transform: translateY(0); margin: 0; padding: 0; }
.gallery-area .image-slide-description { position: relative; width: 400px; min-height: 80px; clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%); overflow: hidden; }
.gallery-area .description-line { position: relative; display: block; color: rgba(255,255,255,0.8); font-size: 16px; font-weight: 300; line-height: 1.4; transform: translateY(0); margin: 0; padding: 0; overflow: hidden; }

@media (max-width: 900px) {
  .gallery-area .image-title-overlay { bottom: 20px; left: 20px; }
  .gallery-area .image-slide-number { width: 300px; height: 18px; }
  .gallery-area .image-slide-number span { font-size: 10px; }
  .gallery-area .image-slide-title { width: 300px; height: 50px; }
  .gallery-area .image-slide-title h1 { font-size: 36px; }
  .gallery-area .image-slide-description { width: 300px; min-height: 70px; }
  .gallery-area .description-line { font-size: 14px; }
}

.gallery-area .controls-container { position: fixed; bottom: 1.25em; left: 50%; transform: translateX(-50%); display: flex; z-index: 11004; opacity: 0; transition: left 1.2s cubic-bezier(.45, 0, .55, 1); gap: 1rem; }
.gallery-area .controls-container.split-mode { left: 78%; }
.gallery-area .percentage-indicator { background-color: #f0f0f0; background-image: radial-gradient(rgba(0,0,0,0.015) 1px, transparent 0); background-size: 0.44em 0.44em; background-position: -0.06em -0.06em; padding: 0.625em 1.25em; border-radius: 0.25em; display: flex; align-items: center; justify-content: center; font-size: 0.75em; text-transform: uppercase; color: #333; min-width: 5em; white-space: nowrap; }
.gallery-area .switch { display: flex; gap: 1.5em; background-color: #222; background-image: radial-gradient(rgba(255,255,255,0.015) 1px, transparent 0); background-size: 0.44em 0.44em; background-position: -0.06em -0.06em; padding: 0.9em 1.8em; border-radius: 0.35em; }
.gallery-area .switch-button { background: none; border: none; color: #666; cursor: pointer; font-size: 0.9em; text-transform: uppercase; padding: 8px 14px; position: relative; transition: all 0.3s ease-in-out; white-space: nowrap; }
.gallery-area .indicator-dot { position: absolute; width: 6px; height: 6px; background-color: #f0f0f0; border-radius: 50%; opacity: 0; transition: opacity 0.3s ease-in-out; top: 50%; transform: translateY(-50%); left: -10px; }
.gallery-area .switch-button:hover .indicator-dot { opacity: 1; }
.gallery-area .sound-toggle { background-color: #f0f0f0; background-image: radial-gradient(rgba(0,0,0,0.015) 1px, transparent 0); background-size: 0.44em 0.44em; background-position: -0.06em -0.06em; padding: 0.7em 1em; border-radius: 0.35em; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.3s ease; min-width: 4.5em; position: relative; border-color: transparent; }
.gallery-area .sound-wave-canvas { width: 2.4em; height: 1.2em; border: none; outline: none; background: none; }

.gallery-area .close-button { position: fixed; top: 50%; right: 20px; width: 64px; height: 64px; background: none; border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; z-index: 11005; opacity: 0; pointer-events: none; transform: translate(40px, -50%); }
.gallery-area .close-button.active { pointer-events: all; }
.gallery-area .close-button:hover { opacity: 0.7; }
.gallery-area .close-button svg { width: 64px; height: 64px; transform: rotate(180deg); }

/* 全局放大覆盖层（插入到 body） */
.scaling-image-overlay { position: fixed; top: 0; left: 0; z-index: 11001; pointer-events: none; will-change: transform; transform: translateZ(0); opacity: 1 !important; }
.scaling-image-overlay img { width: 100%; height: 100%; object-fit: cover; display: block; }
/* 允许移动端双指缩放手势 */
.scaling-image-overlay img { touch-action: none; }

/* 移动端优化 */
@media (max-width: 768px) {
  .gallery-area .split-screen-container { flex-direction: column; }
  .gallery-area .split-left, .gallery-area .split-right { width: 100vw; height: 50vh; }
  .gallery-area .controls-container { 
    bottom: 0.5em; 
    gap: 0.3rem; 
    transform: translateX(-50%) scale(0.85);
    transform-origin: center bottom;
  }
  .gallery-area .switch { 
    padding: 0.5em 1em; 
    gap: 0.8em; 
  }
  .gallery-area .switch-button { 
    font-size: 0.75em; 
    padding: 4px 8px; 
  }
  .gallery-area .sound-toggle { 
    padding: 0.45em 0.65em; 
    min-width: 3em; 
  }
  .gallery-area .sound-wave-canvas { 
    width: 1.8em; 
    height: 0.9em; 
  }
  .gallery-area .image-slide-title h1 { font-size: 18px; }
  .gallery-area .image-slide-description { font-size: 12px; max-height: 32vh; overflow: auto; }
  
  /* 移动端确保网格项不重叠 */
  .gallery-area .grid-item {
    isolation: isolate;
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
  }
  
  /* 移动端优化性能 */
  .gallery-area .viewport {
    will-change: auto;
  }
  
  .gallery-area .canvas-wrapper {
    will-change: transform;
  }
}

.gallery-area .page-vignette-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 9998; }
.gallery-area .page-vignette-extreme { position: absolute; top: 0; left: 0; width: 100%; height: 100%; mix-blend-mode: overlay; background: linear-gradient(to bottom, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.5) 20%, transparent 40%); }

/* 汉堡菜单下拉动画 */
@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideUp {
  from {
    opacity: 1;
    transform: translateY(0);
  }
  to {
    opacity: 0;
    transform: translateY(-10px);
  }
}

.mobile-menu-enter {
  animation: slideDown 0.3s ease-out forwards;
}

.mobile-menu-exit {
  animation: slideUp 0.3s ease-out forwards;
}

/* 管理面板页面允许复制粘贴 */
.allow-select,
.allow-select * {
  -webkit-user-select: text !important;
  -moz-user-select: text !important;
  -ms-user-select: text !important;
  user-select: text !important;
  -webkit-touch-callout: default !important;
}

/* 允许管理面板中的所有输入框、文本区域等正常使用 */
.allow-select input,
.allow-select textarea,
.allow-select [contenteditable] {
  -webkit-user-select: text !important;
  -moz-user-select: text !important;
  -ms-user-select: text !important;
  user-select: text !important;
}
